# <!-- Powered by BMADâ„¢ Core -->

# Story 7.12: SEO Optimization & Meta Tags

## Status

Draft

## Story

**As a** website owner,
**I want** the website optimized for search engines,
**so that** potential users can discover the platform through Google searches.

## Acceptance Criteria

1. Each page includes unique meta title and description
2. Landing page title: "Survey Platform - Create Beautiful Surveys in Minutes"
3. Landing page description: "Modern survey tool for creating, distributing, and analyzing surveys. Free plan available. No credit card required."
4. Open Graph tags added for social media sharing (og:title, og:description, og:image)
5. Twitter Card meta tags for Twitter sharing
6. Canonical URLs set for all pages
7. Structured data (JSON-LD) added for Organization, Product, FAQPage
8. Sitemap.xml generated at /sitemap.xml with all public pages
9. Robots.txt configured to allow indexing
10. Next.js metadata API used for all pages
11. Dynamic OG images generated for blog posts
12. Page load speed optimized (< 2s initial load)
13. All meta content localized for EN/FR versions

## Tasks / Subtasks

- [ ] Add metadata to landing page (AC: 1, 2, 3, 4, 5, 6)
  - [ ] Update `app/page.tsx` with Next.js metadata export
  - [ ] Add title: "Survey Platform - Create Beautiful Surveys in Minutes"
  - [ ] Add description (EN/FR)
  - [ ] Add Open Graph tags (og:title, og:description, og:image, og:url, og:type)
  - [ ] Add Twitter Card tags (twitter:card, twitter:title, twitter:description, twitter:image)
  - [ ] Add canonical URL

- [ ] Add metadata to all marketing pages (AC: 1, 4, 5, 6)
  - [ ] Features page `/features` metadata
  - [ ] Pricing page `/pricing` metadata
  - [ ] About page `/about` metadata
  - [ ] Contact page `/contact` metadata
  - [ ] Blog listing `/blog` metadata
  - [ ] Blog post detail `/blog/[slug]` dynamic metadata

- [ ] Add structured data (JSON-LD) (AC: 7)
  - [ ] Create `components/seo/json-ld.tsx` component
  - [ ] Add Organization schema to root layout
  - [ ] Add Product schema to landing page
  - [ ] Add FAQPage schema to features page (if FAQ section exists)
  - [ ] Add BlogPosting schema to blog post pages

- [ ] Generate sitemap.xml (AC: 8)
  - [ ] Create `app/sitemap.ts` (Next.js App Router sitemap)
  - [ ] Include all public pages: /, /features, /pricing, /about, /contact, /blog
  - [ ] Include all published blog posts dynamically
  - [ ] Include legal pages: /privacy, /terms, /cookies

- [ ] Configure robots.txt (AC: 9)
  - [ ] Create `app/robots.ts` (Next.js App Router robots)
  - [ ] Allow indexing of all public pages
  - [ ] Disallow indexing of admin and API routes
  - [ ] Reference sitemap.xml

- [ ] Generate dynamic OG images for blog posts (AC: 11)
  - [ ] Use Next.js dynamic OG image generation (`@vercel/og`)
  - [ ] Create `app/blog/[slug]/opengraph-image.tsx`
  - [ ] Generate OG image with blog post title and branding

- [ ] Optimize page load speed (AC: 12)
  - [ ] Ensure images use Next.js Image component
  - [ ] Enable Next.js static generation for marketing pages
  - [ ] Minimize JavaScript bundles
  - [ ] Defer non-critical resources

- [ ] Localize meta content (AC: 13)
  - [ ] Add EN meta descriptions to `locales/en.json`
  - [ ] Add FR meta descriptions to `locales/fr.json`
  - [ ] Use i18n in metadata exports

- [ ] Testing and validation
  - [ ] Validate meta tags using browser dev tools
  - [ ] Test Open Graph tags using Facebook Sharing Debugger
  - [ ] Test Twitter Cards using Twitter Card Validator
  - [ ] Validate structured data using Google Rich Results Test
  - [ ] Verify sitemap.xml accessible and valid
  - [ ] Verify robots.txt accessible
  - [ ] Run Lighthouse SEO audit (score > 90)

## Dev Notes

### Epic Context

This is Story 7.12 in Epic 7: Marketing Website & Landing Pages. This story optimizes the website for search engines to drive organic traffic.

### Tech Stack

- **Framework**: Next.js 16 (App Router)
- **React**: 19
- **TypeScript**: 5.x
- **SEO**: Next.js Metadata API, @vercel/og
- **i18n**: next-intl

### Source Tree

- Page metadata: `app/**/page.tsx` (metadata export)
- Sitemap: `app/sitemap.ts`
- Robots: `app/robots.ts`
- JSON-LD component: `components/seo/json-ld.tsx`
- OG images: `app/blog/[slug]/opengraph-image.tsx`
- Translations: `locales/en.json` and `locales/fr.json`

### Next.js Metadata API

Use Next.js 13+ Metadata API:

```typescript
import type { Metadata } from 'next'

export const metadata: Metadata = {
  title: 'Survey Platform - Create Beautiful Surveys in Minutes',
  description: 'Modern survey tool for creating, distributing, and analyzing surveys. Free plan available. No credit card required.',
  openGraph: {
    title: 'Survey Platform - Create Beautiful Surveys in Minutes',
    description: 'Modern survey tool for creating, distributing, and analyzing surveys.',
    url: 'https://survey.fatihoune.com',
    siteName: 'Survey Platform',
    images: [
      {
        url: 'https://survey.fatihoune.com/og-image.png',
        width: 1200,
        height: 630,
        alt: 'Survey Platform',
      },
    ],
    locale: 'en_US',
    type: 'website',
  },
  twitter: {
    card: 'summary_large_image',
    title: 'Survey Platform - Create Beautiful Surveys in Minutes',
    description: 'Modern survey tool for creating, distributing, and analyzing surveys.',
    images: ['https://survey.fatihoune.com/og-image.png'],
  },
  alternates: {
    canonical: 'https://survey.fatihoune.com',
  },
}
```

### Structured Data (JSON-LD)

**Organization Schema**:
```json
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "Survey Platform",
  "url": "https://survey.fatihoune.com",
  "logo": "https://survey.fatihoune.com/logo.png",
  "sameAs": [
    "https://twitter.com/...",
    "https://linkedin.com/company/..."
  ]
}
```

**Product Schema**:
```json
{
  "@context": "https://schema.org",
  "@type": "SoftwareApplication",
  "name": "Survey Platform",
  "applicationCategory": "BusinessApplication",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "USD"
  }
}
```

### Sitemap.ts

```typescript
import { MetadataRoute } from 'next'
import prisma from '@/lib/prisma'

export default async function sitemap(): Promise<MetadataRoute.Sitemap> {
  const baseUrl = 'https://survey.fatihoune.com'

  // Fetch published blog posts
  const posts = await prisma.blogPost.findMany({
    where: { publishedAt: { not: null } },
    select: { slug: true, updatedAt: true },
  })

  return [
    {
      url: baseUrl,
      lastModified: new Date(),
      changeFrequency: 'daily',
      priority: 1,
    },
    {
      url: `${baseUrl}/features`,
      lastModified: new Date(),
      changeFrequency: 'weekly',
      priority: 0.8,
    },
    // ... other pages
    ...posts.map((post) => ({
      url: `${baseUrl}/blog/${post.slug}`,
      lastModified: post.updatedAt,
      changeFrequency: 'monthly' as const,
      priority: 0.6,
    })),
  ]
}
```

### Robots.ts

```typescript
import { MetadataRoute } from 'next'

export default function robots(): MetadataRoute.Robots {
  return {
    rules: {
      userAgent: '*',
      allow: '/',
      disallow: ['/admin/', '/api/'],
    },
    sitemap: 'https://survey.fatihoune.com/sitemap.xml',
  }
}
```

### Dynamic OG Images

Use `@vercel/og`:

```typescript
// app/blog/[slug]/opengraph-image.tsx
import { ImageResponse } from '@vercel/og'

export const runtime = 'edge'

export default async function Image({ params }: { params: { slug: string } }) {
  const post = await fetchPost(params.slug)

  return new ImageResponse(
    (
      <div style={{ /* styling */ }}>
        <h1>{post.title}</h1>
      </div>
    ),
    {
      width: 1200,
      height: 630,
    }
  )
}
```

### Integration Points

- Metadata for all marketing pages (Stories 7.1-7.10, 7.15)
- Dynamic OG images for blog posts (Story 7.10)
- Sitemap includes all public pages

### Testing

**Test File Location**: SEO testing is primarily manual and using external tools

**Testing Standards**:
- Use Facebook Sharing Debugger: https://developers.facebook.com/tools/debug/
- Use Twitter Card Validator: https://cards-dev.twitter.com/validator
- Use Google Rich Results Test: https://search.google.com/test/rich-results
- Use Lighthouse SEO audit (Chrome DevTools)
- Verify sitemap.xml and robots.txt are accessible
- Target Lighthouse SEO score > 90

**Testing Tools**:
- Facebook Sharing Debugger
- Twitter Card Validator
- Google Rich Results Test
- Google Lighthouse
- screaming-frog-seo-spider (optional, for advanced audits)

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-11-06 | 1.0 | Initial story creation from Epic 7 | Sarah (PO Agent) |

## Dev Agent Record

### Agent Model Used

_To be filled by dev agent_

### Debug Log References

_To be filled by dev agent_

### Completion Notes

_To be filled by dev agent_

### File List

_To be filled by dev agent_

## QA Results

_To be filled by QA agent_
